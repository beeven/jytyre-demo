"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const moment = require("moment-mini-ts");
const app = getApp();
var ApprovalStatus;
(function (ApprovalStatus) {
    ApprovalStatus["drafting"] = "drafting";
    ApprovalStatus["pending"] = "pending";
    ApprovalStatus["approved"] = "approved";
    ApprovalStatus["rejected"] = "rejected";
})(ApprovalStatus = exports.ApprovalStatus || (exports.ApprovalStatus = {}));
class WarrantyService {
    constructor() {
        this.db = wx.cloud.database();
        console.log("constructing WarrantyService");
    }
    loadWarrantyItems() {
        return __awaiter(this, void 0, void 0, function* () {
            let items = yield this.db.collection("warranty").where({
                _openid: app.globalData.openid
            }).field({
                _id: true,
                thumbnail: true,
                plateNumber: true,
                endDate: true,
                approvalStatus: true
            }).get();
            let ret = [];
            items.data.forEach(item => {
                ret.push({
                    _id: item._id.toString(),
                    thumbnail: item["thumbnail"],
                    plateNumber: item["plateNumber"],
                    endDate: item["endDate"] ? new Date(item["endDate"]) : undefined,
                    approvalStatus: item["approvalStatus"]
                });
            });
            return ret;
        });
    }
    getWarrantyItemDetail(id) {
        return __awaiter(this, void 0, void 0, function* () {
            let ret = yield this.db.collection("warranty").doc(id).get();
            let detail = {
                _id: ret.data._id,
                thumbnail: ret.data["thumbnail"],
                plateNumber: ret.data["plateNumber"],
                plateImageFileID: ret.data["plateImageFileID"],
                shopAddress: ret.data["shopAddress"],
                shopImageFileID: ret.data["shopImageFileID"],
                shopName: ret.data["shopName"],
                tyreModelImageFileID: ret.data["tyreModelImageFileID"],
                tyreInstallationImageFileID: ret.data["tyreInstallationImageFileID"],
                datePurchased: ret.data["datePurchased"] ? new Date(ret.data["datePurchased"]) : new Date(),
                endDate: ret.data["endDate"] ? new Date(ret.data["endDate"]) : new Date((new Date()).getTime() + 365 * 24 * 60 * 60 * 1000),
                approvalStatus: ret.data["approvalStatus"],
                dateCreated: ret.data["dateCreated"] ? new Date(ret.data["dateCreated"]) : new Date(),
                lastUpdated: ret.data["lastUpdated"] ? new Date(ret.data["lastUpdated"]) : new Date()
            };
            let shopLocation = ret.data["shopLocation"];
            if (shopLocation != null && typeof shopLocation !== 'undefined' && shopLocation.coordinates) {
                detail["shopLocation"] = {
                    longtitude: ret.data["shopLocation"].coordinates[0].toString(),
                    latitude: ret.data["shopLocation"].coordinates[1].toString(),
                };
            }
            return detail;
        });
    }
    createWarrantyItem() {
        return __awaiter(this, void 0, void 0, function* () {
            let ret = yield this.db.collection("warranty").add({
                data: {
                    approvalStatus: ApprovalStatus.drafting,
                    dateCreated: this.db.serverDate(),
                    lastUpdated: this.db.serverDate(),
                }
            });
            return ret._id;
        });
    }
    updateWarrantyItem(id, update, location) {
        return __awaiter(this, void 0, void 0, function* () {
            let shopLocation = location ? Object.assign({ type: 'Point' }, location) : undefined;
            let o = Object.entries(update).filter(([name, value]) => !!value);
            if (o.length == 0 && typeof shopLocation === 'undefined') {
                return;
            }
            update.lastUpdated = this.db.serverDate();
            let ret = yield this.db.collection("warranty").doc(id).update({
                data: Object.assign({}, update, { shopLocation: shopLocation })
            });
        });
    }
    removeWarrantyItem(id) {
        return __awaiter(this, void 0, void 0, function* () {
            let ret = yield this.db.collection("warranty").doc(id).field({
                _id: true,
                plateImageFileID: true,
                tyreModelImageFileID: true,
                tyreInstallationImageFileID: true,
                shopImageFileID: true
            }).get();
            let fileIDs = [ret.data["plateImageFileID"], ret.data["shopImageFileID"], ret.data["tyreModelImageFileID"], ret.data["tyreInstallationImageFildID"]];
            fileIDs = fileIDs.filter(x => !!x);
            let t1 = wx.cloud.deleteFile({
                fileList: fileIDs
            });
            let t2 = this.db.collection("warranty").doc(id).remove();
            yield Promise.all([t1, t2]);
        });
    }
    samplingDatabase() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log("Sampling Data");
            let items = yield this.loadWarrantyItems();
            if (items.length >= 3) {
                return;
            }
            for (let i = 0; i < 3; i++) {
                let startDate = (moment().subtract(Math.round(Math.random() * 100), "day"));
                let endDate = (moment().add(Math.round(Math.random() * 100), "day"));
                let ret = yield this.db.collection("warranty").add({
                    data: {
                        thumbnail: defaultThumbnail,
                        plateNumber: "ç²¤A DE" + Math.round((Math.random() * 1000)).toString().padStart(3, '0'),
                        startDate: startDate.toDate(),
                        endDate: endDate.toDate()
                    }
                });
                console.log(ret);
            }
        });
    }
    uploadPlateImage(warrantyID, localFilePath) {
        return __awaiter(this, void 0, void 0, function* () {
            let fileID = yield this.uploadImage(warrantyID, localFilePath, "licensePlate");
            let res = yield wx.cloud.callFunction({
                name: 'scanPlate',
                data: {
                    fileID: fileID
                }
            });
            console.log(res);
            if (res.result.error_msg) {
                throw new Error(res.result.error_msg);
            }
            return {
                fileID: fileID,
                plateNumber: res.result.number,
                probability: res.result.probability
            };
        });
    }
    getPlateNumber(fileID) {
        return __awaiter(this, void 0, void 0, function* () {
            let res = yield wx.cloud.callFunction({
                name: 'scanPlate',
                data: {
                    fileID: fileID
                }
            });
            console.log(res);
            if (res.result.error_msg) {
                throw new Error(res.result.error_msg);
            }
            return {
                fileID: fileID,
                plateNumber: res.result.number,
                probability: res.result.probability
            };
        });
    }
    uploadImage(warrantyID, localFilePath, name) {
        return __awaiter(this, void 0, void 0, function* () {
            let i = localFilePath.lastIndexOf(".");
            let ext = ".jpg";
            if (i != -1) {
                ext = localFilePath.substr(i);
            }
            let ret = yield wx.cloud.uploadFile({
                cloudPath: `warranty/${warrantyID}/${name}${ext}`,
                filePath: localFilePath
            });
            yield this.db.collection("warranty").doc(warrantyID).update({
                data: {
                    [name + "ImageFileID"]: ret.fileID
                }
            });
            return ret.fileID;
        });
    }
}
exports.WarrantyService = WarrantyService;
const defaultThumbnail = "data:image/png;base64,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";
exports.warrantyService = new WarrantyService();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FycmFudHkuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndhcnJhbnR5LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNBLHlDQUF5QztBQUV6QyxNQUFNLEdBQUcsR0FBRyxNQUFNLEVBQVUsQ0FBQztBQUU3QixJQUFZLGNBS1g7QUFMRCxXQUFZLGNBQWM7SUFDdEIsdUNBQXFCLENBQUE7SUFDckIscUNBQW1CLENBQUE7SUFDbkIsdUNBQXFCLENBQUE7SUFDckIsdUNBQXFCLENBQUE7QUFDekIsQ0FBQyxFQUxXLGNBQWMsR0FBZCxzQkFBYyxLQUFkLHNCQUFjLFFBS3pCO0FBd0NELE1BQWEsZUFBZTtJQUN4QjtRQUlRLE9BQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBSDdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBSUssaUJBQWlCOztZQUVuQixJQUFJLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDbkQsT0FBTyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsTUFBTTthQUNqQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUNMLEdBQUcsRUFBRSxJQUFJO2dCQUNULFNBQVMsRUFBRSxJQUFJO2dCQUNmLFdBQVcsRUFBRSxJQUFJO2dCQUNqQixPQUFPLEVBQUUsSUFBSTtnQkFDYixjQUFjLEVBQUUsSUFBSTthQUN2QixDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDVCxJQUFJLEdBQUcsR0FBbUIsRUFBRSxDQUFDO1lBQzdCLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUN0QixHQUFHLENBQUMsSUFBSSxDQUFDO29CQUNMLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBSSxDQUFDLFFBQVEs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RyxJQUFJLGVBQWUsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU15QXBwIH0gZnJvbSBcIi4uLy4uL2FwcFwiO1xyXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSBcIm1vbWVudC1taW5pLXRzXCI7XHJcblxyXG5jb25zdCBhcHAgPSBnZXRBcHA8SU15QXBwPigpO1xyXG5cclxuZXhwb3J0IGVudW0gQXBwcm92YWxTdGF0dXMge1xyXG4gICAgZHJhZnRpbmcgPSBcImRyYWZ0aW5nXCIsXHJcbiAgICBwZW5kaW5nID0gXCJwZW5kaW5nXCIsXHJcbiAgICBhcHByb3ZlZCA9IFwiYXBwcm92ZWRcIixcclxuICAgIHJlamVjdGVkID0gXCJyZWplY3RlZFwiXHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFdhcnJhbnR5SXRlbSB7XHJcbiAgICBfaWQ6IHN0cmluZztcclxuICAgIHRodW1ibmFpbDogc3RyaW5nO1xyXG4gICAgcGxhdGVOdW1iZXI6IHN0cmluZztcclxuICAgIGVuZERhdGU/OiBEYXRlLFxyXG4gICAgYXBwcm92YWxTdGF0dXM6IEFwcHJvdmFsU3RhdHVzO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFdhcnJhbnR5SXRlbURldGFpbCB7XHJcbiAgICBfaWQ6IHN0cmluZztcclxuICAgIHRodW1ibmFpbDogc3RyaW5nO1xyXG4gICAgcGxhdGVOdW1iZXI/OiBzdHJpbmc7XHJcbiAgICBwbGF0ZUltYWdlRmlsZUlEPzogc3RyaW5nO1xyXG4gICAgc2hvcEltYWdlRmlsZUlEPzogc3RyaW5nO1xyXG4gICAgc2hvcE5hbWU/OiBzdHJpbmc7XHJcbiAgICBzaG9wQWRkcmVzcz86IHN0cmluZztcclxuICAgIHNob3BMb2NhdGlvbj86IHtcclxuICAgICAgICBsYXRpdHVkZTogbnVtYmVyO1xyXG4gICAgICAgIGxvbmd0aXR1ZGU6IG51bWJlcjtcclxuICAgIH1cclxuICAgIHR5cmVNb2RlbEltYWdlRmlsZUlEOiBzdHJpbmc7XHJcbiAgICB0eXJlSW5zdGFsbGF0aW9uSW1hZ2VGaWxlSUQ6IHN0cmluZztcclxuICAgIGRhdGVQdXJjaGFzZWQ/OiBEYXRlO1xyXG4gICAgZW5kRGF0ZT86IERhdGU7XHJcbiAgICBhcHByb3ZhbFN0YXR1czogQXBwcm92YWxTdGF0dXM7XHJcbiAgICBkYXRlQ3JlYXRlZDogRGF0ZTtcclxuICAgIGxhc3RVcGRhdGVkPzogRGF0ZSB8IERCLlNlcnZlckRhdGU7XHJcbiAgICBmZWVkYmFjaz86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVcGxvYWRQbGF0ZUltYWdlUmVzdWx0IHtcclxuICAgIGZpbGVJRDogc3RyaW5nO1xyXG4gICAgcGxhdGVOdW1iZXI6IHN0cmluZztcclxuICAgIHByb2JhYmlsaXR5OiBudW1iZXI7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgV2FycmFudHlTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29uc3RydWN0aW5nIFdhcnJhbnR5U2VydmljZVwiKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGIgPSB3eC5jbG91ZC5kYXRhYmFzZSgpO1xyXG5cclxuICAgIGFzeW5jIGxvYWRXYXJyYW50eUl0ZW1zKCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGl0ZW1zID0gYXdhaXQgdGhpcy5kYi5jb2xsZWN0aW9uKFwid2FycmFudHlcIikud2hlcmUoe1xyXG4gICAgICAgICAgICBfb3BlbmlkOiBhcHAuZ2xvYmFsRGF0YS5vcGVuaWRcclxuICAgICAgICB9KS5maWVsZCh7XHJcbiAgICAgICAgICAgIF9pZDogdHJ1ZSxcclxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0cnVlLFxyXG4gICAgICAgICAgICBwbGF0ZU51bWJlcjogdHJ1ZSxcclxuICAgICAgICAgICAgZW5kRGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgYXBwcm92YWxTdGF0dXM6IHRydWVcclxuICAgICAgICB9KS5nZXQoKTtcclxuICAgICAgICBsZXQgcmV0OiBXYXJyYW50eUl0ZW1bXSA9IFtdO1xyXG4gICAgICAgIGl0ZW1zLmRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgX2lkOiBpdGVtLl9pZCEudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogaXRlbVtcInRodW1ibmFpbFwiXSxcclxuICAgICAgICAgICAgICAgIHBsYXRlTnVtYmVyOiBpdGVtW1wicGxhdGVOdW1iZXJcIl0sXHJcbiAgICAgICAgICAgICAgICBlbmREYXRlOiBpdGVtW1wiZW5kRGF0ZVwiXSA/IG5ldyBEYXRlKGl0ZW1bXCJlbmREYXRlXCJdKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsU3RhdHVzOiBpdGVtW1wiYXBwcm92YWxTdGF0dXNcIl1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFdhcnJhbnR5SXRlbURldGFpbChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHJldCA9IGF3YWl0IHRoaXMuZGIuY29sbGVjdGlvbihcIndhcnJhbnR5XCIpLmRvYyhpZCkuZ2V0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGRldGFpbDogV2FycmFudHlJdGVtRGV0YWlsID0gIHtcclxuICAgICAgICAgICAgX2lkOiByZXQuZGF0YS5faWQgYXMgc3RyaW5nLFxyXG4gICAgICAgICAgICB0aHVtYm5haWw6IHJldC5kYXRhW1widGh1bWJuYWlsXCJdLFxyXG4gICAgICAgICAgICBwbGF0ZU51bWJlcjogcmV0LmRhdGFbXCJwbGF0ZU51bWJlclwiXSxcclxuICAgICAgICAgICAgcGxhdGVJbWFnZUZpbGVJRDogcmV0LmRhdGFbXCJwbGF0ZUltYWdlRmlsZUlEXCJdLFxyXG4gICAgICAgICAgICBzaG9wQWRkcmVzczogcmV0LmRhdGFbXCJzaG9wQWRkcmVzc1wiXSxcclxuICAgICAgICAgICAgc2hvcEltYWdlRmlsZUlEOiByZXQuZGF0YVtcInNob3BJbWFnZUZpbGVJRFwiXSxcclxuICAgICAgICAgICAgc2hvcE5hbWU6IHJldC5kYXRhW1wic2hvcE5hbWVcIl0sXHJcbiAgICAgICAgICAgIHR5cmVNb2RlbEltYWdlRmlsZUlEOiByZXQuZGF0YVtcInR5cmVNb2RlbEltYWdlRmlsZUlEXCJdLFxyXG4gICAgICAgICAgICB0eXJlSW5zdGFsbGF0aW9uSW1hZ2VGaWxlSUQ6IHJldC5kYXRhW1widHlyZUluc3RhbGxhdGlvbkltYWdlRmlsZUlEXCJdLFxyXG4gICAgICAgICAgICBkYXRlUHVyY2hhc2VkOiByZXQuZGF0YVtcImRhdGVQdXJjaGFzZWRcIl0gPyBuZXcgRGF0ZShyZXQuZGF0YVtcImRhdGVQdXJjaGFzZWRcIl0pIDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgZW5kRGF0ZTogcmV0LmRhdGFbXCJlbmREYXRlXCJdID8gbmV3IERhdGUocmV0LmRhdGFbXCJlbmREYXRlXCJdKSA6IG5ldyBEYXRlKCAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgMzY1KjI0KjYwKjYwKjEwMDApLFxyXG4gICAgICAgICAgICBhcHByb3ZhbFN0YXR1czogcmV0LmRhdGFbXCJhcHByb3ZhbFN0YXR1c1wiXSxcclxuICAgICAgICAgICAgZGF0ZUNyZWF0ZWQ6IHJldC5kYXRhW1wiZGF0ZUNyZWF0ZWRcIl0gPyBuZXcgRGF0ZShyZXQuZGF0YVtcImRhdGVDcmVhdGVkXCJdKSA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGxhc3RVcGRhdGVkOiByZXQuZGF0YVtcImxhc3RVcGRhdGVkXCJdID8gbmV3IERhdGUocmV0LmRhdGFbXCJsYXN0VXBkYXRlZFwiXSkgOiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgbGV0IHNob3BMb2NhdGlvbiA9IHJldC5kYXRhW1wic2hvcExvY2F0aW9uXCJdXHJcbiAgICAgICAgaWYoc2hvcExvY2F0aW9uICE9IG51bGwgJiYgdHlwZW9mIHNob3BMb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2hvcExvY2F0aW9uLmNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkZXRhaWxbXCJzaG9wTG9jYXRpb25cIl0gPSB7XHJcbiAgICAgICAgICAgICAgICBsb25ndGl0dWRlOiAgcmV0LmRhdGFbXCJzaG9wTG9jYXRpb25cIl0uY29vcmRpbmF0ZXNbMF0udG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiAgcmV0LmRhdGFbXCJzaG9wTG9jYXRpb25cIl0uY29vcmRpbmF0ZXNbMV0udG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGV0YWlsO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZVdhcnJhbnR5SXRlbSgpIHtcclxuICAgICAgICBsZXQgcmV0ID0gYXdhaXQgdGhpcy5kYi5jb2xsZWN0aW9uKFwid2FycmFudHlcIikuYWRkKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgYXBwcm92YWxTdGF0dXM6IEFwcHJvdmFsU3RhdHVzLmRyYWZ0aW5nLFxyXG4gICAgICAgICAgICAgICAgZGF0ZUNyZWF0ZWQ6IHRoaXMuZGIuc2VydmVyRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgbGFzdFVwZGF0ZWQ6IHRoaXMuZGIuc2VydmVyRGF0ZSgpLFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXQuX2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZVdhcnJhbnR5SXRlbShpZDogc3RyaW5nLCB1cGRhdGU6IE9wdGlvbmFsPE9taXQ8V2FycmFudHlJdGVtRGV0YWlsLFwic2hvcExvY2F0aW9uXCI+PiwgbG9jYXRpb24/OiB7bGF0aXR1ZGU6IG51bWJlciwgbG9uZ3RpdHVkZTogbnVtYmVyfSkge1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBsZXQgc2hvcExvY2F0aW9uID0gbG9jYXRpb24gPyB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsXHJcbiAgICAgICAgICAgIC4uLmxvY2F0aW9uXHJcbiAgICAgICAgfSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbGV0IG8gPSBPYmplY3QuZW50cmllcyh1cGRhdGUpLmZpbHRlcigoW25hbWUsdmFsdWVdKSA9PiAhIXZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYoby5sZW5ndGggPT0gMCAmJiB0eXBlb2Ygc2hvcExvY2F0aW9uID09PSAndW5kZWZpbmVkJyApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXBkYXRlLmxhc3RVcGRhdGVkID0gdGhpcy5kYi5zZXJ2ZXJEYXRlKCk7XHJcblxyXG4gICAgICAgIGxldCByZXQgPSBhd2FpdCB0aGlzLmRiLmNvbGxlY3Rpb24oXCJ3YXJyYW50eVwiKS5kb2MoaWQpLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgLi4udXBkYXRlLFxyXG4gICAgICAgICAgICBzaG9wTG9jYXRpb246IHNob3BMb2NhdGlvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVtb3ZlV2FycmFudHlJdGVtKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcmV0ID0gYXdhaXQgdGhpcy5kYi5jb2xsZWN0aW9uKFwid2FycmFudHlcIikuZG9jKGlkKS5maWVsZCh7XHJcbiAgICAgICAgICAgIF9pZDogdHJ1ZSxcclxuICAgICAgICAgICAgcGxhdGVJbWFnZUZpbGVJRDogdHJ1ZSxcclxuICAgICAgICAgICAgdHlyZU1vZGVsSW1hZ2VGaWxlSUQ6IHRydWUsXHJcbiAgICAgICAgICAgIHR5cmVJbnN0YWxsYXRpb25JbWFnZUZpbGVJRDogdHJ1ZSxcclxuICAgICAgICAgICAgc2hvcEltYWdlRmlsZUlEOiB0cnVlXHJcbiAgICAgICAgfSkuZ2V0KCk7XHJcblxyXG4gICAgICAgIGxldCBmaWxlSURzOiBzdHJpbmdbXSA9IFtyZXQuZGF0YVtcInBsYXRlSW1hZ2VGaWxlSURcIl0sIHJldC5kYXRhW1wic2hvcEltYWdlRmlsZUlEXCJdLCByZXQuZGF0YVtcInR5cmVNb2RlbEltYWdlRmlsZUlEXCJdLCByZXQuZGF0YVtcInR5cmVJbnN0YWxsYXRpb25JbWFnZUZpbGRJRFwiXV07XHJcbiAgICAgICAgZmlsZUlEcyA9IGZpbGVJRHMuZmlsdGVyKHggPT4gISF4KTtcclxuXHJcbiAgICAgICAgbGV0IHQxID13eC5jbG91ZC5kZWxldGVGaWxlKHtcclxuICAgICAgICAgICAgZmlsZUxpc3Q6IGZpbGVJRHNcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgdDIgPSB0aGlzLmRiLmNvbGxlY3Rpb24oXCJ3YXJyYW50eVwiKS5kb2MoaWQpLnJlbW92ZSgpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFt0MSwgdDJdKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYW1wbGluZ0RhdGFiYXNlKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2FtcGxpbmcgRGF0YVwiKVxyXG4gICAgICAgIGxldCBpdGVtcyA9IGF3YWl0IHRoaXMubG9hZFdhcnJhbnR5SXRlbXMoKTtcclxuICAgICAgICBpZihpdGVtcy5sZW5ndGggPj0gMykgeyByZXR1cm47IH1cclxuICAgICAgICBmb3IobGV0IGk9MDtpPDM7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0RGF0ZSA9ICAobW9tZW50KCkuc3VidHJhY3QoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMCksIFwiZGF5XCIpKTtcclxuICAgICAgICAgICAgbGV0IGVuZERhdGUgPSAobW9tZW50KCkuYWRkKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxMDApLCBcImRheVwiKSk7XHJcbiAgICAgICAgICAgIGxldCByZXQgPSBhd2FpdCB0aGlzLmRiLmNvbGxlY3Rpb24oXCJ3YXJyYW50eVwiKS5hZGQoe1xyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbDogZGVmYXVsdFRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwbGF0ZU51bWJlcjogXCLnsqRBIERFXCIrIE1hdGgucm91bmQoKE1hdGgucmFuZG9tKCkgKiAxMDAwKSkudG9TdHJpbmcoKS5wYWRTdGFydCgzLCcwJyksXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUudG9EYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogZW5kRGF0ZS50b0RhdGUoKVxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGxvYWRQbGF0ZUltYWdlKHdhcnJhbnR5SUQ6IHN0cmluZywgbG9jYWxGaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxVcGxvYWRQbGF0ZUltYWdlUmVzdWx0PntcclxuXHJcbiAgICAgICAgbGV0IGZpbGVJRCA9IGF3YWl0IHRoaXMudXBsb2FkSW1hZ2Uod2FycmFudHlJRCwgbG9jYWxGaWxlUGF0aCwgXCJsaWNlbnNlUGxhdGVcIik7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCByZXMgPSBhd2FpdCB3eC5jbG91ZC5jYWxsRnVuY3Rpb24oe1xyXG4gICAgICAgICAgICBuYW1lOiAnc2NhblBsYXRlJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZmlsZUlEOiBmaWxlSURcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG5cclxuICAgICAgICBpZiAocmVzLnJlc3VsdC5lcnJvcl9tc2cpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5yZXN1bHQuZXJyb3JfbXNnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpbGVJRDogZmlsZUlELFxyXG4gICAgICAgICAgICBwbGF0ZU51bWJlcjogcmVzLnJlc3VsdC5udW1iZXIsXHJcbiAgICAgICAgICAgIHByb2JhYmlsaXR5OiByZXMucmVzdWx0LnByb2JhYmlsaXR5XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFBsYXRlTnVtYmVyKGZpbGVJRDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHd4LmNsb3VkLmNhbGxGdW5jdGlvbih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdzY2FuUGxhdGUnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBmaWxlSUQ6IGZpbGVJRFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICBpZiAocmVzLnJlc3VsdC5lcnJvcl9tc2cpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5yZXN1bHQuZXJyb3JfbXNnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpbGVJRDogZmlsZUlELFxyXG4gICAgICAgICAgICBwbGF0ZU51bWJlcjogcmVzLnJlc3VsdC5udW1iZXIsXHJcbiAgICAgICAgICAgIHByb2JhYmlsaXR5OiByZXMucmVzdWx0LnByb2JhYmlsaXR5XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwbG9hZEltYWdlKHdhcnJhbnR5SUQ6IHN0cmluZywgbG9jYWxGaWxlUGF0aDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgaSA9IGxvY2FsRmlsZVBhdGgubGFzdEluZGV4T2YoXCIuXCIpO1xyXG4gICAgICAgIGxldCBleHQgPSBcIi5qcGdcIjtcclxuICAgICAgICBpZihpIT0gLTEgKSB7XHJcbiAgICAgICAgICAgIGV4dCA9IGxvY2FsRmlsZVBhdGguc3Vic3RyKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmV0ID0gIGF3YWl0IHd4LmNsb3VkLnVwbG9hZEZpbGUoe1xyXG4gICAgICAgICAgICBjbG91ZFBhdGg6IGB3YXJyYW50eS8ke3dhcnJhbnR5SUR9LyR7bmFtZX0ke2V4dH1gLFxyXG4gICAgICAgICAgICBmaWxlUGF0aDogbG9jYWxGaWxlUGF0aFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmRiLmNvbGxlY3Rpb24oXCJ3YXJyYW50eVwiKS5kb2Mod2FycmFudHlJRCkudXBkYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgW25hbWUrXCJJbWFnZUZpbGVJRFwiXTogcmV0LmZpbGVJRFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXQuZmlsZUlEO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY29uc3QgZGVmYXVsdFRodW1ibmFpbCA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFHUUFBQUJrQ0FNQUFBQkhQR1ZtQUFBQlMybFVXSFJZVFV3NlkyOXRMbUZrYjJKbExuaHRjQUFBQUFBQVBEOTRjR0ZqYTJWMElHSmxaMmx1UFNMdnU3OGlJR2xrUFNKWE5VMHdUWEJEWldocFNIcHlaVk42VGxSamVtdGpPV1FpUHo0S1BIZzZlRzF3YldWMFlTQjRiV3h1Y3pwNFBTSmhaRzlpWlRwdWN6cHRaWFJoTHlJZ2VEcDRiWEIwYXowaVFXUnZZbVVnV0UxUUlFTnZjbVVnTlM0MkxXTXhORElnTnprdU1UWXdPVEkwTENBeU1ERTNMekEzTHpFekxUQXhPakEyT2pNNUlDQWdJQ0FnSUNBaVBnb2dQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRLSUNBOGNtUm1Pa1JsYzJOeWFYQjBhVzl1SUhKa1pqcGhZbTkxZEQwaUlpOCtDaUE4TDNKa1pqcFNSRVkrQ2p3dmVEcDRiWEJ0WlhSaFBnbzhQM2h3WVdOclpYUWdaVzVrUFNKeUlqOCtuaHhnN3dBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBQmMxSkhRZ0N1emh6cEFBQURBRkJNVkVVQUFBQWRIUjEvZ1lDYW01dng4ZkhwNnVudDdlMkZoWVh3N2U3dTd1Nm9xYW1Oam8zRXhNVEl5TWphMnRxMXRiV1FrSkRxNnVwOWZYMldsNVp4Y1hLZW5wNjR1TGgyZDNZbEpTVlRVMU5pWTJMQnZMeWNuSnl1cjY2TGk0dGlZMlBRMGRCaVkyT1RrNVBPeTh6ejgvUFcxTlNmb0oreHNyRzh2YjF6YzNOOGZId2tKQ1FJQ0Fod2NuRWNIQnd0TFMyUGo0OEJBUUU5UFQySmlZbmEyOXBWVmxVdkx5L3M2K3pTMHRMLy8vOTNlWGhlWGw2ZG5aMTZlM3FobzZJL1FVQyt3TCtabVptdnI2Kzl2YjFRVVZGQVFFQmZYMStJaUloSlNVbVRrNU1wS1NtV2xwVkZSMFpSVVZGZVhsN3g4Zkd6dExUeDhmSHA2ZW5jM2QzRHhNTzN0N2RZV0ZoZ1lHRGQzZDJrcEtTZW41NXdjSEhVMU5SRFJVWEt5c3BEUTBQZTB0TjRlSG1Ra0pDOHZMeTJ1YmgrZm40QUFBQXlNelAvLy84T0R3OUJRME1mSVNBUkVoRVdGaFl4TWpGTVRVeEZSa1loSWlGeGMzTTNPRGhWVjFZakpDUXRMaTArUHo0ZUh4NC9RRUJQVUU5YlhGd1pHaGtNREF4QVFrRTFOVFZSVWxJNE9qa1VGQlJnWW1FMU56ZFpXbGxmWUdBckxDeUJnb0lYR0JnaUl5TktTMHNsSlNWTlQwNURSa1p3Y25KdWIyOWtaV1lJQ0FoRFJFUm1hR2M2T2p0alpHT3JyYXdiR3h0M2VYbFRWVlJJU1VrS0NncDVlM283UER5bHA2WXBLU21FaG9XUGtaQ0ppNG9uS0NjOFBUMXNiVzJabXBvRkJRVjhmWHd1THk5MGRYUklTMHAvZ0g5U1UxTURBd01xS3lza0ppWmRYMTZEaElTVGxaUWJIaDFvYVdtTGpvMUdSMGRXV0Zrd01EQ3hzckZxYTJ1U2twSTVPVGxIU0VpR2g0ZkV4TVF6TlRXNHVybWpwYVNvcXFuR3lNZGJYVjY4dmIzUTB0RThQejdOME5DS2pJemIzTnlJaVltMnQ3ZDFkbmEwdHJXWGw1ZXZzYkVkSFIxbFoyYWVvSjlPVVZMSnlzbDZmWURuNStmWDJkaWdvcUxVMXRhVWw1cVFrcGJTMDlOOWdJS05qbzdKek16TnpjM2o0K09ibloyOXY3K3l0TFNHaUl1TWpwSnJibkMvdzhPY242SGY0TitpcGFuQndjRzZ1cmx6ZDNpbHFLd0JBUUhzN2V5QmhZYnc4UEQyOXZab2EyN0l6TkdDZ29mNysvdk4wZGRmWVdYQnY3KzcwcWloQUFBQVpuUlNUbE1BM2I5L0Mwa1ZmeEF1Z3AxQWFFUitnS3Zjdk5wQ1VycUJ3dHNLNzhTODhvV0FYTG9aa3JtaWk0V0F5dlc2Z0lIaTllcUdHK3ptWlQvZXJNakg3dmZYOHQzZjNmUmxZZXpRR3R4d2dJR3VIR0pybzJYeDlkWDE0TitJOU9EbDMvTFd6UHUrL05jbTdNN0lBQUFMSmtsRVFWUm8zdTJYWlhCYlZ4YkgyNlJKZzgyR3l0eHVtYm5kZG92THpNd3prdDhUTXoweE0xcG95UmJabGtHV1pNc2drMnpMYk12TU1rTWNPMHdOdE0yK0pOM083a3pVTm1tLzdJeCtJK25wZzNULzU5eHo3am5uM25CRGhnd1pNbVRJa0NGRGh2OFhOdS9jK2VyV3IyKzV1MzYrYmRzOWoreTlkOE50dHozOTlHMGJOdHk3ZCs4amY5ejFabkYvN3E4ZnV2OHI2Mnk5LzlIdGIreTc4MldjUmhRckNqVnpxalZHRGRqRmIwWWlpMFFhRGM1c1MxWjVjeC9hOUZVa3Rtd1hPeGhnaVJLSE15TERVWXJJSmVLRFNvMnhoS2xtTW9NOGFuTysxbTVrTXNlS0E5KzhmbzFiN3h1cEZJdE44SnNjTEdGb3lFR05xS2haVTlKWW91Ylp5VUo5bnQwa2lnSklFU0hzNGoxNjAzVnFiRGNOOWhSN0Q3ZjA0MHg2blRyZnJTU0JKVVkrVmlUQ3htSXhKSStwTVBPaDZxNW1wWkdQUk9XOTlhdnIycW8zQXBiNitxRzI3cUZJZmpHeHdxWTNqNm1WdUdvODZIZnhzWHdPWTZRcnhPS05tWVZkb05nc3RJdU03dXVJLytaOWc4Y0xXaGZQSDFyMGFNdUxxeEl5Y1EyTHpOS3ltRHc3czdGUzVoYXk4b3p0Snl3RjJnaXRzblUwTG1aVjNuUE5HanYrVkhzc3QyTzZ1NjM3Z015VHRDVlNSRk9sWG1qeUVpT1N1b2l3WUthS3FJWnFuTVRXUXlzQk84NHlVRnR1RHNpdU5jZDJCQzYyMVM0ZW1acWE2bTFaU2RSWERPU1cybXpGV20xVnFWYnJKSm9xVnJ5bFlGVG9UZ3pscnZaNVJLbk90a1M4dnVMdWF3ais1bzF2LzhXejFOblVPem05MU5aMHdHSnBYVmtkYjZsUGVzdEwzWW5Cbm1UU1RheXdwR1JZcW0wMHdiZUtJcklHNyttNUpZdW50dUwrTDYveGxwUmRPZFhXTWo1M3FHOWd0WFpvdGJaMnFLV2x6NUpJRkJTa0VxTXJnd3Vlbm9xQnhYNDVtR3B6aTlUVlhUeXhibkx5OVBqb1VGdnk0Uyt0VWk3ME52VWU2WjNxWHVwZUhHODYxdEhSMGxKcmFZVWR5azBWZU9MdWlncVBKeGxmVUllQ25iMmxWRDVMSzFFcjU3TE9UblUySFNkK3FUUDU4S3NQYjMzczI3WGRIYkRsdWFtVndRclBRbzgzN3BiSlpPV2xjRWgwdW55VFhsTER3MVdESkJxTzJUa2VRN0FKVWw5UTVoMWNxUEpVOWNncXZqaU5OKy82ZHFyVVJIVEx0SFVqWnJOWktCUktKSkpJSk5JdU5MZXo3RXc3ajRuRGQ3bjRmZ1lIeE9PWllsYS9EWTAyRit1SXhVU2hwREpmWjdQRjNlOS9rY1l0OTlVUjFVeUoyQjdrOFhoTUh2TVM2a3N2KzFpakJvL0RhZnl1TGhCbjUvRllra3VMbWlwcklzRWEyM3FsTU1Ja2s0TmtNVm5LcWlNLzlya0tqejZpTE9FeHFoMGFJd2lDSEJqR0ZXZ2dTT1B6UVk1TEpQS0RqY3BxVHBCRmhxa1JzOXJGWkVtTlJvT3ZZUUdvRWZPSWJwMWY0MHhlM0pKZVkrZlltQjhKOGtWOGthajVVNUJJNU9XbnFCa3BJc0cxL2RKWGFoUWxVcXNaSEUxSlRYNi9MWjhsRVlzanBva3pOZTBIZTd3SGUyYk9uS3M2bmo3Mlc1M2FFenpRVVlMSDQ0MGdwNHNQbHljK0NWNGRDMU5FcFlaOXZsQlJNNytMUnRaNmU4aCt2S1l4aU1QSlRzNU9UTXpQVDB3NDUyY096eDYyRFBXdEhwNlk2UHg3V2xmK3BRdlk0alpkd0tsenlrcEw0MTZ0TFpsTWVyM3hjbmQ1cWJOL3BMNDFONUZvYlUxNVBibUpWQjBEcHhaelFoUktUMXZGek1DaHhjN3A2YW5wN3FYT3hhWGxjUXVTODlCZDZUSzN2bFNKZENuRjNHREVIOEk3aElNTGJoSTNHeXR0Sm1HcERZd1lYbFlxS3k5M3k1dzZabENmeldYVm1IQStrakVjYlpuc0hNZ3Q4QVowUXJ2YVNFTEtrMWtzQk9LQnRNMEpLK1psRzJsNEVxK2RoclRudTh2ajlSS2MzWWdGY2Y2aWJBZVdqQ3ZDay9YNWV2T0lVZzBPbDZ3VGhWUVhOOGFSUjg3bVE0cW9YQzZISURvcVNrYzdQQkNWL3ZaTDZicVREMmVVVW1tNFptUTJWb0hGMTE0c2lQdWJwWFFxVjBvUFpWT3hmcmk3TjRCK0RvMkdwOFhzNitkT2FMaDVDQVNhUnZBMzUwbERQbCtZb3FBb0NJUndURUFCRE5KYnI2NXgwd2VJSEFySlpXY1psY0tnc1YxU0YzYzZzb1ZrQms1aVorQ0REbzZ4MGFGME5NSkp3V2dRME5kUHpLK0xxR1dGQ0lTVlJLZm1oV0VGQlFGRlFOR2ppbkJJamtBSU5xYng1QjJQTWl5UERrTVFKb2VOempHd3FRb0N4QVlnZEE2QXdRaHlDZ1VDTk1DR0FkQUV6dnpzbVpsMktaVkxJd2tRMUpBdnJGQ2dVSFI2bEVDUFdnbXdOdzNzc2pSQjJmcE9VOXRRajdPWW1DK1VpTWxrTzQ3RG9IRm9MazVKNDZXVDZlZnlRUnhaTXBKZkhLZy9OTm1kbStweElia0V0S3FSUGt3bFhKR0lRcEFBWUF2Q0twSlJsZlBqcTR1OE9lYXNhSnZ1bkpwczZ6c3lOemZlTk4wNWZ1eFlSMVB1aW1WMHBzcDlwbWR0clNjdWN4YnI2c3p0WW5QQTR2VEZrR2VHZUFSU3pCZEYwU0VNVUZqR2p1YUp3REFrZGN4MnNaKzl1c2kzRUpEQ01icWFTaVV2bmwyZVBKSVlUZlZOTGk5LzJORUNkOGJwdWFXK2dsSmJQNUZZYkNzdkdEaDJvTFZGU0tGbEg4aWF4U2xvVktBc0J3bzVpQjVMUytmVTFJRXV5TmhYWjdqOTZpSjNJQUFNUUpDR0NmU0M3bU50blUyV2pzWGw1ZVd6VFdTOTFya3dlakRTaUVlcTRCeFMrV0pLZDh2WmJsY1JBbEh3Y2VPWWcwb0psVnNPTEM2T0graFk3ZXZvbUpNQnBKbCt3UVBwUkF6aHFOeHF0Y0lmQ2dVRjZRTHhqVXl5bm94Q0tSU0tjRGdzOVhlaGdCd0FMUUFRMFpJZUlrcmxKR3BYTlNTOVZKVnFHMDBrNnVQZWdvTDYraVFSMzZEL1pKMzc0TlZGN3RHYXNJV0lNa01PRzJBWG5rSjhoZ0NEd2NpaDRiQTBwbEVYV2RGb05LYlFNQVpTQmJxc3BXdzlKYlFtVVVFb1dWd1c2TmV4T0VVS3VtL1lQTnQrOElQOVZ4Zlo0RGRMS1NCMTJDb2dvQXdHUTltbk9rRFo1VWRPanB3cXFsa1JFM3doTEUxZG92SDVqcDVjQjhIc2MrZlhJRHBOM09DeldoVlNyQXMwR24xR3o0VUwvM2dwWGVEOVZvS1MwWkI5QlJLcGdjdmxJcEUwa2pTVXB3cVJrREVLWHovQ0wrS0RhcjFPRkpLN3pwK3NVZkltWnM2dnFiaFVINWJrb3RGb0RmQy9zQ29LYStia3ZXbm1vZzFsTkRhaThJcjVoWVVHQUJCZ0lEcWRUaUFRVkNxQ0NzdHRsbHZsaFQ2a0NzTUd5dVFodXBJNG9XKzlRRHozQ1pHRUpUVTBrTGhVbFJYK2JSNkVKdFdzSGQ2YlJ1UzNoU0dxaW80dUxDdjdyNEI4QmdBQWNyUWN6UnFvclBQbm9LRVFJR3R0bHF6RTVRYmJhZ01CZmRtMlFqUzhxd0kwbTNSd2JYNTd1aUpzb0pyRVRDV2VRY3NtY1pHeEltbWVUd1VYcEdHclZTNFFZR0FqS1FvNlJPZHdTVDRCcE9JU2VIMnNiUDBKaHVEZzBTSjVxRm9ZR0t4ZFdxNjB3c2VBWFhSeXZ2MUhhWnN2bW9yaytvMTRCand1VkR1Q1BEQ2JBV2V4UTRsVHdvV3h1cm9hajhjeG9ESzBBSUkzMEljaExRVk1FK2RtekxOYStseldmMWhGeU9XQWI1NUkycEcyL2Y0VXppRzRBS0p5MkpDcmtTTHdNYmhZcW85Z2xXTUVBTUNHTXhzTkNBalNZYmh4REtNZ3VYK0JlR2lXY0RJMW8rUjhwcEYxdXRDQVFXTndPazc2UWVJMUJGc2hLRHpGOVNPMVJDa0NzZlRSaDVQTHZYTkx4enBXTFFsNGFnd1VCNUsvZXg0TzJLV2tHTWFDYXgrRGlQYWpFeFJXUjIxdFg4dnhBMDNqMHgrcEVmQkpveGhlL0p6TDdkMEl3ekFheU1rVGlUQUlSSDNXLy9MUmg4dTl2Yjk1K1lVWFhubnFGQ0NRSzVRbmo1WVpsTE5rU0NrT3N1NjhjOSsrUFh2MlBMZm5oemZDM1BGNVk5ZnJCYWRnUTlBNThJRUhjaSt2ZTNxNXQ3T3RvN1oxZE5DVGhLZUpZbWRGL2NMZDMzOWVJSmNQUy9VSFkrUUxZL1Mvdlhqei9oOWN3MzNrOWF4cHZBSGVqMU1JZytuaUtEd0RlOTN3bUVMVTVkZFZ3dFRsNjdURWZwdXo5TGtuRVdpQndJZDA2Q3BMZk5iOTEzanAyYlI4dXRmaUNkUkZ5Q3d5cWNGUG96RTRSaVBlMGFqRXFYbThJSmtWa1poTmRkcitoZTg5Q2NkRjRNTTJ4eURnd1d1K3Z2MWk5Kzdkdjl6OSt6Ly85ZjMzM3Z2RHUrLytFMjVUcFFGYjhTVmY2a3dtdlJtZXZZWG1FWDMvZlRjK3hRWUU5RkRlSzlldUFWOTJ0Mnk1NldlYk5tMjY1WlpiWHR1eFkrZGp1M2J0MnJadDI4YU5HNzhCYy9NVm5uamk4Y2UvKzUxbmIzL21tZHQvc3YrR0RCa3laTWlRSVVPR0RCa3laUGg2K0RlQ0w0Wm1RYTdHUFFBQUFBQkpSVTVFcmtKZ2dnPT1cIlxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCB3YXJyYW50eVNlcnZpY2UgPSBuZXcgV2FycmFudHlTZXJ2aWNlKCk7Il19