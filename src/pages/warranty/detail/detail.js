"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const warranty_service_1 = require("../warranty.service");
Page({
    data: {},
    async onLoad(options) {
        console.log(options);
        let ret = await warranty_service_1.warrantyService.getWarrantyItemDetail(options["id"]);
        this.setData({
            id: ret._id,
            plate: ret.plate || "",
            plateImageUrl: ret.plateImageUrl || "",
            shopImageUrl: ret.shopImageUrl || "",
            shopAddress: ret.shopAddress || "",
            tyreImageUrls: ret.tyreImageUrls || [],
            datePurchased: ret.datePurchased.toString() || "",
            endDate: ret.endDate.toDateString() || "",
            approvalStatus: ret.approvalStatus || warranty_service_1.ApprovalStatus.drafting
        });
    },
    async onRemoveWarranty() {
        wx.showToast({
            title: '提交中',
            icon: 'loading',
            duration: 3000
        });
        await warranty_service_1.warrantyService.removeWarrantyItem(this.data.id);
        wx.navigateBack({
            delta: 1,
            complete: () => {
                wx.hideToast();
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0YWlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGV0YWlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMERBQXFFO0FBZ0JyRSxJQUFJLENBQUM7SUFDRCxJQUFJLEVBQUUsRUFFcUI7SUFDM0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPO1FBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFckIsSUFBSSxHQUFHLEdBQUcsTUFBTSxrQ0FBZSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUUsQ0FBQyxDQUFDO1FBRXRFLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDVCxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUc7WUFDWCxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3RCLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxJQUFJLEVBQUU7WUFDdEMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxZQUFZLElBQUksRUFBRTtZQUNwQyxXQUFXLEVBQUUsR0FBRyxDQUFDLFdBQVcsSUFBSSxFQUFFO1lBQ2xDLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxJQUFJLEVBQUU7WUFDdEMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxhQUFjLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRTtZQUNsRCxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQVEsQ0FBQyxZQUFZLEVBQUUsSUFBSSxFQUFFO1lBQzFDLGNBQWMsRUFBRSxHQUFHLENBQUMsY0FBYyxJQUFJLGlDQUFjLENBQUMsUUFBUTtTQUNoRSxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsS0FBSyxDQUFDLGdCQUFnQjtRQUNsQixFQUFFLENBQUMsU0FBUyxDQUFDO1lBQ1QsS0FBSyxFQUFFLEtBQUs7WUFDWixJQUFJLEVBQUUsU0FBUztZQUNmLFFBQVEsRUFBRSxJQUFJO1NBQ2pCLENBQUMsQ0FBQztRQUNILE1BQU0sa0NBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZELEVBQUUsQ0FBQyxZQUFZLENBQUM7WUFDWixLQUFLLEVBQUUsQ0FBQztZQUNSLFFBQVEsRUFBRSxHQUFFLEVBQUU7Z0JBQ1YsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ25CLENBQUM7U0FDSixDQUFDLENBQUE7SUFDTixDQUFDO0NBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt3YXJyYW50eVNlcnZpY2UsIEFwcHJvdmFsU3RhdHVzIH0gZnJvbSBcIi4uL3dhcnJhbnR5LnNlcnZpY2VcIjtcclxuXHJcbmludGVyZmFjZSBXYXJyYW50eURldGFpbFBhZ2VEYXRhIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBwbGF0ZTogc3RyaW5nO1xyXG4gICAgcGxhdGVJbWFnZVVybDogc3RyaW5nO1xyXG4gICAgc2hvcEltYWdlVXJsOiBzdHJpbmc7XHJcbiAgICBzaG9wQWRkcmVzczogc3RyaW5nO1xyXG4gICAgdHlyZUltYWdlVXJsczogc3RyaW5nW107XHJcbiAgICBkYXRlUHVyY2hhc2VkOiBzdHJpbmc7XHJcbiAgICBlbmREYXRlOiBzdHJpbmcsXHJcbiAgICBhcHByb3ZhbFN0YXR1czogQXBwcm92YWxTdGF0dXMsXHJcblxyXG59XHJcblxyXG5cclxuUGFnZSh7XHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgXHJcbiAgICB9IGFzIFdhcnJhbnR5RGV0YWlsUGFnZURhdGEsXHJcbiAgICBhc3luYyBvbkxvYWQob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBsZXQgcmV0ID0gYXdhaXQgd2FycmFudHlTZXJ2aWNlLmdldFdhcnJhbnR5SXRlbURldGFpbChvcHRpb25zW1wiaWRcIl0hKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgICAgaWQ6IHJldC5faWQsXHJcbiAgICAgICAgICAgIHBsYXRlOiByZXQucGxhdGUgfHwgXCJcIixcclxuICAgICAgICAgICAgcGxhdGVJbWFnZVVybDogcmV0LnBsYXRlSW1hZ2VVcmwgfHwgXCJcIixcclxuICAgICAgICAgICAgc2hvcEltYWdlVXJsOiByZXQuc2hvcEltYWdlVXJsIHx8IFwiXCIsXHJcbiAgICAgICAgICAgIHNob3BBZGRyZXNzOiByZXQuc2hvcEFkZHJlc3MgfHwgXCJcIixcclxuICAgICAgICAgICAgdHlyZUltYWdlVXJsczogcmV0LnR5cmVJbWFnZVVybHMgfHwgW10sXHJcbiAgICAgICAgICAgIGRhdGVQdXJjaGFzZWQ6IHJldC5kYXRlUHVyY2hhc2VkIS50b1N0cmluZygpIHx8IFwiXCIsXHJcbiAgICAgICAgICAgIGVuZERhdGU6IHJldC5lbmREYXRlIS50b0RhdGVTdHJpbmcoKSB8fCBcIlwiLFxyXG4gICAgICAgICAgICBhcHByb3ZhbFN0YXR1czogcmV0LmFwcHJvdmFsU3RhdHVzIHx8IEFwcHJvdmFsU3RhdHVzLmRyYWZ0aW5nXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcblxyXG4gICAgYXN5bmMgb25SZW1vdmVXYXJyYW50eSgpIHtcclxuICAgICAgICB3eC5zaG93VG9hc3Qoe1xyXG4gICAgICAgICAgICB0aXRsZTogJ+aPkOS6pOS4rScsXHJcbiAgICAgICAgICAgIGljb246ICdsb2FkaW5nJyxcclxuICAgICAgICAgICAgZHVyYXRpb246IDMwMDBcclxuICAgICAgICB9KTtcclxuICAgICAgICBhd2FpdCB3YXJyYW50eVNlcnZpY2UucmVtb3ZlV2FycmFudHlJdGVtKHRoaXMuZGF0YS5pZCk7XHJcbiAgICAgICAgd3gubmF2aWdhdGVCYWNrKHtcclxuICAgICAgICAgICAgZGVsdGE6IDEsXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiAoKT0+e1xyXG4gICAgICAgICAgICAgICAgd3guaGlkZVRvYXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KSJdfQ==