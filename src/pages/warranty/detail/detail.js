"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const warranty_service_1 = require("../warranty.service");
Page({
    data: {},
    async onLoad(options) {
        console.log(options);
        let ret = await warranty_service_1.warrantyService.getWarrantyItemDetail(options["id"]);
        this.setData({
            id: ret._id,
            plateNumber: ret.plateNumber || "",
            plateImageUrl: ret.plateImageFileID || "",
            shopImageUrl: ret.shopImageFileID || "",
            shopAddress: ret.shopAddress || "",
            tyreImageUrls: ret.tyreImageFileIDs || [],
            datePurchased: ret.datePurchased.toString() || "",
            endDate: ret.endDate.toDateString() || "",
            approvalStatus: ret.approvalStatus || warranty_service_1.ApprovalStatus.drafting
        });
    },
    async onRemoveWarranty() {
        wx.showLoading({
            title: '提交中'
        });
        await warranty_service_1.warrantyService.removeWarrantyItem(this.data.id);
        let pages = getCurrentPages();
        console.log(pages);
        let page = pages[pages.length - 2];
        await page.onItemRemoved(this.data.id);
        wx.hideLoading();
        wx.navigateBack({
            delta: 1,
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0YWlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGV0YWlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMERBQXFFO0FBaUJyRSxJQUFJLENBQUM7SUFDRCxJQUFJLEVBQUUsRUFFcUI7SUFDM0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPO1FBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFckIsSUFBSSxHQUFHLEdBQUcsTUFBTSxrQ0FBZSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUUsQ0FBQyxDQUFDO1FBRXRFLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDVCxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUc7WUFDWCxXQUFXLEVBQUUsR0FBRyxDQUFDLFdBQVcsSUFBSSxFQUFFO1lBQ2xDLGFBQWEsRUFBRSxHQUFHLENBQUMsZ0JBQWdCLElBQUksRUFBRTtZQUN6QyxZQUFZLEVBQUUsR0FBRyxDQUFDLGVBQWUsSUFBSSxFQUFFO1lBQ3ZDLFdBQVcsRUFBRSxHQUFHLENBQUMsV0FBVyxJQUFJLEVBQUU7WUFDbEMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxnQkFBZ0IsSUFBSSxFQUFFO1lBQ3pDLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUU7WUFDbEQsT0FBTyxFQUFFLEdBQUcsQ0FBQyxPQUFRLENBQUMsWUFBWSxFQUFFLElBQUksRUFBRTtZQUMxQyxjQUFjLEVBQUUsR0FBRyxDQUFDLGNBQWMsSUFBSSxpQ0FBYyxDQUFDLFFBQVE7U0FDaEUsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVELEtBQUssQ0FBQyxnQkFBZ0I7UUFDbEIsRUFBRSxDQUFDLFdBQVcsQ0FBQztZQUNYLEtBQUssRUFBRSxLQUFLO1NBQ2YsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxrQ0FBZSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdkQsSUFBSSxLQUFLLEdBQUcsZUFBZSxFQUFFLENBQUM7UUFDOUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBQyxDQUFDLENBQTRCLENBQUM7UUFDNUQsTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdkMsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2pCLEVBQUUsQ0FBQyxZQUFZLENBQUM7WUFDWixLQUFLLEVBQUUsQ0FBQztTQUNYLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3dhcnJhbnR5U2VydmljZSwgQXBwcm92YWxTdGF0dXMgfSBmcm9tIFwiLi4vd2FycmFudHkuc2VydmljZVwiO1xyXG5pbXBvcnQgeyBXYXJyYW50eVBhZ2VEYXRhLCBXYXJyYW50eVBhZ2V9IGZyb20gJy4uL3dhcnJhbnR5JztcclxuXHJcbmludGVyZmFjZSBXYXJyYW50eURldGFpbFBhZ2VEYXRhIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBwbGF0ZTogc3RyaW5nO1xyXG4gICAgcGxhdGVJbWFnZVVybDogc3RyaW5nO1xyXG4gICAgc2hvcEltYWdlVXJsOiBzdHJpbmc7XHJcbiAgICBzaG9wQWRkcmVzczogc3RyaW5nO1xyXG4gICAgdHlyZUltYWdlVXJsczogc3RyaW5nW107XHJcbiAgICBkYXRlUHVyY2hhc2VkOiBzdHJpbmc7XHJcbiAgICBlbmREYXRlOiBzdHJpbmcsXHJcbiAgICBhcHByb3ZhbFN0YXR1czogQXBwcm92YWxTdGF0dXMsXHJcblxyXG59XHJcblxyXG5cclxuUGFnZSh7XHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgXHJcbiAgICB9IGFzIFdhcnJhbnR5RGV0YWlsUGFnZURhdGEsXHJcbiAgICBhc3luYyBvbkxvYWQob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBsZXQgcmV0ID0gYXdhaXQgd2FycmFudHlTZXJ2aWNlLmdldFdhcnJhbnR5SXRlbURldGFpbChvcHRpb25zW1wiaWRcIl0hKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgICAgaWQ6IHJldC5faWQsXHJcbiAgICAgICAgICAgIHBsYXRlTnVtYmVyOiByZXQucGxhdGVOdW1iZXIgfHwgXCJcIixcclxuICAgICAgICAgICAgcGxhdGVJbWFnZVVybDogcmV0LnBsYXRlSW1hZ2VGaWxlSUQgfHwgXCJcIixcclxuICAgICAgICAgICAgc2hvcEltYWdlVXJsOiByZXQuc2hvcEltYWdlRmlsZUlEIHx8IFwiXCIsXHJcbiAgICAgICAgICAgIHNob3BBZGRyZXNzOiByZXQuc2hvcEFkZHJlc3MgfHwgXCJcIixcclxuICAgICAgICAgICAgdHlyZUltYWdlVXJsczogcmV0LnR5cmVJbWFnZUZpbGVJRHMgfHwgW10sXHJcbiAgICAgICAgICAgIGRhdGVQdXJjaGFzZWQ6IHJldC5kYXRlUHVyY2hhc2VkIS50b1N0cmluZygpIHx8IFwiXCIsXHJcbiAgICAgICAgICAgIGVuZERhdGU6IHJldC5lbmREYXRlIS50b0RhdGVTdHJpbmcoKSB8fCBcIlwiLFxyXG4gICAgICAgICAgICBhcHByb3ZhbFN0YXR1czogcmV0LmFwcHJvdmFsU3RhdHVzIHx8IEFwcHJvdmFsU3RhdHVzLmRyYWZ0aW5nXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcblxyXG4gICAgYXN5bmMgb25SZW1vdmVXYXJyYW50eSgpIHtcclxuICAgICAgICB3eC5zaG93TG9hZGluZyh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn5o+Q5Lqk5LitJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHdhcnJhbnR5U2VydmljZS5yZW1vdmVXYXJyYW50eUl0ZW0odGhpcy5kYXRhLmlkKTtcclxuICAgICAgICBsZXQgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhwYWdlcyk7XHJcbiAgICAgICAgbGV0IHBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGgtMl0gYXMgdW5rbm93biBhcyBXYXJyYW50eVBhZ2U7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5vbkl0ZW1SZW1vdmVkKHRoaXMuZGF0YS5pZCk7XHJcbiAgICAgICAgd3guaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICB3eC5uYXZpZ2F0ZUJhY2soe1xyXG4gICAgICAgICAgICBkZWx0YTogMSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KSJdfQ==