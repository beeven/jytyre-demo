"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const warranty_service_1 = require("../warranty.service");
Page({
    data: {},
    async onLoad(options) {
        console.log(options);
        let ret = await warranty_service_1.warrantyService.getWarrantyItemDetail(options["id"]);
        this.setData({
            id: ret._id,
            plate: ret.plate || "",
            plateImageUrl: ret.plateImageUrl || "",
            shopImageUrl: ret.shopImageUrl || "",
            shopAddress: ret.shopAddress || "",
            tyreImageUrls: ret.tyreImageUrls || [],
            datePurchased: ret.datePurchased.toString() || "",
            endDate: ret.endDate.toDateString() || "",
            approvalStatus: ret.approvalStatus || warranty_service_1.ApprovalStatus.drafting
        });
    },
    async onRemoveWarranty() {
        wx.showLoading({
            title: '提交中'
        });
        await warranty_service_1.warrantyService.removeWarrantyItem(this.data.id);
        let pages = getCurrentPages();
        console.log(pages);
        let page = pages[pages.length - 2];
        await page.onItemRemoved(this.data.id);
        wx.hideLoading();
        wx.navigateBack({
            delta: 1,
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0YWlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGV0YWlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMERBQXFFO0FBaUJyRSxJQUFJLENBQUM7SUFDRCxJQUFJLEVBQUUsRUFFcUI7SUFDM0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPO1FBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFckIsSUFBSSxHQUFHLEdBQUcsTUFBTSxrQ0FBZSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUUsQ0FBQyxDQUFDO1FBRXRFLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDVCxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUc7WUFDWCxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3RCLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxJQUFJLEVBQUU7WUFDdEMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxZQUFZLElBQUksRUFBRTtZQUNwQyxXQUFXLEVBQUUsR0FBRyxDQUFDLFdBQVcsSUFBSSxFQUFFO1lBQ2xDLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxJQUFJLEVBQUU7WUFDdEMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxhQUFjLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRTtZQUNsRCxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQVEsQ0FBQyxZQUFZLEVBQUUsSUFBSSxFQUFFO1lBQzFDLGNBQWMsRUFBRSxHQUFHLENBQUMsY0FBYyxJQUFJLGlDQUFjLENBQUMsUUFBUTtTQUNoRSxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsS0FBSyxDQUFDLGdCQUFnQjtRQUNsQixFQUFFLENBQUMsV0FBVyxDQUFDO1lBQ1gsS0FBSyxFQUFFLEtBQUs7U0FDZixDQUFDLENBQUM7UUFDSCxNQUFNLGtDQUFlLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN2RCxJQUFJLEtBQUssR0FBRyxlQUFlLEVBQUUsQ0FBQztRQUM5QixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBNEIsQ0FBQztRQUM1RCxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN2QyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDakIsRUFBRSxDQUFDLFlBQVksQ0FBQztZQUNaLEtBQUssRUFBRSxDQUFDO1NBQ1gsQ0FBQyxDQUFBO0lBQ04sQ0FBQztDQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7d2FycmFudHlTZXJ2aWNlLCBBcHByb3ZhbFN0YXR1cyB9IGZyb20gXCIuLi93YXJyYW50eS5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBXYXJyYW50eVBhZ2VEYXRhLCBXYXJyYW50eVBhZ2V9IGZyb20gJy4uL3dhcnJhbnR5JztcblxuaW50ZXJmYWNlIFdhcnJhbnR5RGV0YWlsUGFnZURhdGEge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgcGxhdGU6IHN0cmluZztcbiAgICBwbGF0ZUltYWdlVXJsOiBzdHJpbmc7XG4gICAgc2hvcEltYWdlVXJsOiBzdHJpbmc7XG4gICAgc2hvcEFkZHJlc3M6IHN0cmluZztcbiAgICB0eXJlSW1hZ2VVcmxzOiBzdHJpbmdbXTtcbiAgICBkYXRlUHVyY2hhc2VkOiBzdHJpbmc7XG4gICAgZW5kRGF0ZTogc3RyaW5nLFxuICAgIGFwcHJvdmFsU3RhdHVzOiBBcHByb3ZhbFN0YXR1cyxcblxufVxuXG5cblBhZ2Uoe1xuICAgIGRhdGE6IHtcbiAgICAgICAgXG4gICAgfSBhcyBXYXJyYW50eURldGFpbFBhZ2VEYXRhLFxuICAgIGFzeW5jIG9uTG9hZChvcHRpb25zKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xuXG4gICAgICAgIGxldCByZXQgPSBhd2FpdCB3YXJyYW50eVNlcnZpY2UuZ2V0V2FycmFudHlJdGVtRGV0YWlsKG9wdGlvbnNbXCJpZFwiXSEpO1xuXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgICBpZDogcmV0Ll9pZCxcbiAgICAgICAgICAgIHBsYXRlOiByZXQucGxhdGUgfHwgXCJcIixcbiAgICAgICAgICAgIHBsYXRlSW1hZ2VVcmw6IHJldC5wbGF0ZUltYWdlVXJsIHx8IFwiXCIsXG4gICAgICAgICAgICBzaG9wSW1hZ2VVcmw6IHJldC5zaG9wSW1hZ2VVcmwgfHwgXCJcIixcbiAgICAgICAgICAgIHNob3BBZGRyZXNzOiByZXQuc2hvcEFkZHJlc3MgfHwgXCJcIixcbiAgICAgICAgICAgIHR5cmVJbWFnZVVybHM6IHJldC50eXJlSW1hZ2VVcmxzIHx8IFtdLFxuICAgICAgICAgICAgZGF0ZVB1cmNoYXNlZDogcmV0LmRhdGVQdXJjaGFzZWQhLnRvU3RyaW5nKCkgfHwgXCJcIixcbiAgICAgICAgICAgIGVuZERhdGU6IHJldC5lbmREYXRlIS50b0RhdGVTdHJpbmcoKSB8fCBcIlwiLFxuICAgICAgICAgICAgYXBwcm92YWxTdGF0dXM6IHJldC5hcHByb3ZhbFN0YXR1cyB8fCBBcHByb3ZhbFN0YXR1cy5kcmFmdGluZ1xuICAgICAgICB9KVxuICAgIH0sXG5cbiAgICBhc3luYyBvblJlbW92ZVdhcnJhbnR5KCkge1xuICAgICAgICB3eC5zaG93TG9hZGluZyh7XG4gICAgICAgICAgICB0aXRsZTogJ+aPkOS6pOS4rSdcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdhcnJhbnR5U2VydmljZS5yZW1vdmVXYXJyYW50eUl0ZW0odGhpcy5kYXRhLmlkKTtcbiAgICAgICAgbGV0IHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhZ2VzKTtcbiAgICAgICAgbGV0IHBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGgtMl0gYXMgdW5rbm93biBhcyBXYXJyYW50eVBhZ2U7XG4gICAgICAgIGF3YWl0IHBhZ2Uub25JdGVtUmVtb3ZlZCh0aGlzLmRhdGEuaWQpO1xuICAgICAgICB3eC5oaWRlTG9hZGluZygpO1xuICAgICAgICB3eC5uYXZpZ2F0ZUJhY2soe1xuICAgICAgICAgICAgZGVsdGE6IDEsXG4gICAgICAgIH0pXG4gICAgfVxufSkiXX0=