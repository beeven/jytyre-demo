"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const baidu_aip_sdk_1 = require("baidu-aip-sdk");
const fs = require("fs");
const app_id = "16802498";
const api_key = "Gy3snWWGXxAYn7AToT1GkkUt";
const secret_key = "idG3M6LjlgYG3822lCfehh7Gxv6DmlQc";
const aipClient = new baidu_aip_sdk_1.ocr(app_id, api_key, secret_key);
function scanPlate(imageData, multiple = false) {
    return aipClient.licensePlate(imageData, multiple.toString());
}
exports.scanPlate = scanPlate;
function scanPlateFromFile(path) {
    return new Promise((resolve, reject) => {
        fs.readFile(path, (err, data) => {
            if (err) {
                return reject(err);
            }
            aipClient.licensePlate(data.toString('base64'))
                .then(ret => {
                resolve(ret);
            })
                .catch(ex => {
                reject(ex);
            });
        });
    });
}
exports.scanPlateFromFile = scanPlateFromFile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGljZW5zZVBsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibGljZW5zZVBsYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQWdEO0FBQ2hELHlCQUF5QjtBQUV6QixNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUM7QUFDMUIsTUFBTSxPQUFPLEdBQUcsMEJBQTBCLENBQUM7QUFDM0MsTUFBTSxVQUFVLEdBQUcsa0NBQWtDLENBQUM7QUFXdEQsTUFBTSxTQUFTLEdBQUcsSUFBSSxtQkFBRyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFjdkQsU0FBZ0IsU0FBUyxDQUFDLFNBQWlCLEVBQUUsV0FBb0IsS0FBSztJQUNsRSxPQUFPLFNBQVMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ2pFLENBQUM7QUFGRCw4QkFFQztBQUVELFNBQWdCLGlCQUFpQixDQUFDLElBQUk7SUFDbEMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtRQUNuQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRTtZQUM1QixJQUFJLEdBQUcsRUFBRTtnQkFDTCxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUN0QjtZQUNELFNBQVMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDMUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNSLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNqQixDQUFDLENBQUM7aUJBQ0QsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFO2dCQUNSLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNmLENBQUMsQ0FBQyxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUM7QUFmRCw4Q0FlQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9jciwgSHR0cENsaWVudCB9IGZyb20gXCJiYWlkdS1haXAtc2RrXCI7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiO1xyXG5cclxuY29uc3QgYXBwX2lkID0gXCIxNjgwMjQ5OFwiO1xyXG5jb25zdCBhcGlfa2V5ID0gXCJHeTNzbldXR1h4QVluN0FUb1QxR2trVXRcIjtcclxuY29uc3Qgc2VjcmV0X2tleSA9IFwiaWRHM002TGpsZ1lHMzgyMmxDZmVoaDdHeHY2RG1sUWNcIjtcclxuXHJcblxyXG5cclxuLy8gSHR0cENsaWVudC5zZXRSZXF1ZXN0T3B0aW9ucyh7IHRpbWVvdXQ6IDUwMDAgfSk7XHJcbi8vIEh0dHBDbGllbnQuc2V0UmVxdWVzdEludGVyY2VwdG9yKChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4vLyAgICAgY29uc29sZS5sb2cocmVxdWVzdE9wdGlvbnMpO1xyXG4vLyAgICAgcmVxdWVzdE9wdGlvbnMudGltZW91dCA9IDUwMDA7XHJcbi8vICAgICByZXR1cm4gcmVxdWVzdE9wdGlvbnM7XHJcbi8vIH0pO1xyXG5cclxuY29uc3QgYWlwQ2xpZW50ID0gbmV3IG9jcihhcHBfaWQsIGFwaV9rZXksIHNlY3JldF9rZXkpO1xyXG5cclxuaW50ZXJmYWNlIExpY2Vuc2VQbGF0ZVJlc3VsdCB7XHJcbiAgICBsb2dfaWQ6IG51bWJlcjtcclxuICAgIGVycm9yX2NvZGU/OiBudW1iZXI7XHJcbiAgICBlcnJvcl9tc2c/OiBzdHJpbmc7XHJcbiAgICB3b3Jkc19yZXN1bHQ/OiB7XHJcbiAgICAgICAgY29sb3I6IHN0cmluZztcclxuICAgICAgICBudW1iZXI6IHN0cmluZztcclxuICAgICAgICBwcm9iYWJpbGl0eTogbnVtYmVyW10sXHJcbiAgICAgICAgdmVydGV4ZXNfbG9jYXRpb246IGFueVtdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2NhblBsYXRlKGltYWdlRGF0YTogc3RyaW5nLCBtdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxMaWNlbnNlUGxhdGVSZXN1bHQ+IHtcclxuICAgIHJldHVybiBhaXBDbGllbnQubGljZW5zZVBsYXRlKGltYWdlRGF0YSxtdWx0aXBsZS50b1N0cmluZygpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNjYW5QbGF0ZUZyb21GaWxlKHBhdGgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZnMucmVhZEZpbGUocGF0aCwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWlwQ2xpZW50LmxpY2Vuc2VQbGF0ZShkYXRhLnRvU3RyaW5nKCdiYXNlNjQnKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJldCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXQpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChleCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufSJdfQ==