"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const baidu_aip_sdk_1 = require("baidu-aip-sdk");
const fs = require("fs");
const app_id = "16802498";
const api_key = "Gy3snWWGXxAYn7AToT1GkkUt";
const secret_key = "idG3M6LjlgYG3822lCfehh7Gxv6DmlQc";
const aipClient = new baidu_aip_sdk_1.ocr(app_id, api_key, secret_key);
function scanPlate(imageData, multiple = false) {
    return aipClient.licensePlate({
        image: imageData,
        multi_detect: multiple.toString()
    });
}
exports.scanPlate = scanPlate;
function scanPlateFromFile(path) {
    return new Promise((resolve, reject) => {
        fs.readFile(path, (err, data) => {
            if (err) {
                return reject(err);
            }
            aipClient.licensePlate(data.toString('base64'))
                .then(ret => {
                resolve(ret);
            })
                .catch(ex => {
                reject(ex);
            });
        });
    });
}
exports.scanPlateFromFile = scanPlateFromFile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGljZW5zZVBsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibGljZW5zZVBsYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQWdEO0FBQ2hELHlCQUF5QjtBQUV6QixNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUM7QUFDMUIsTUFBTSxPQUFPLEdBQUcsMEJBQTBCLENBQUM7QUFDM0MsTUFBTSxVQUFVLEdBQUcsa0NBQWtDLENBQUM7QUFXdEQsTUFBTSxTQUFTLEdBQUcsSUFBSSxtQkFBRyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFjdkQsU0FBZ0IsU0FBUyxDQUFDLFNBQWlCLEVBQUUsV0FBb0IsS0FBSztJQUNsRSxPQUFPLFNBQVMsQ0FBQyxZQUFZLENBQUM7UUFDMUIsS0FBSyxFQUFFLFNBQVM7UUFDaEIsWUFBWSxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUU7S0FDcEMsQ0FBQyxDQUFBO0FBQ04sQ0FBQztBQUxELDhCQUtDO0FBRUQsU0FBZ0IsaUJBQWlCLENBQUMsSUFBSTtJQUNsQyxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ25DLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFO1lBQzVCLElBQUksR0FBRyxFQUFFO2dCQUNMLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3RCO1lBQ0QsU0FBUyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUMxQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ1IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2pCLENBQUMsQ0FBQztpQkFDRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUU7Z0JBQ1IsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2YsQ0FBQyxDQUFDLENBQUM7UUFDWCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQztBQWZELDhDQWVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2NyLCBIdHRwQ2xpZW50IH0gZnJvbSBcImJhaWR1LWFpcC1zZGtcIjtcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiO1xuXG5jb25zdCBhcHBfaWQgPSBcIjE2ODAyNDk4XCI7XG5jb25zdCBhcGlfa2V5ID0gXCJHeTNzbldXR1h4QVluN0FUb1QxR2trVXRcIjtcbmNvbnN0IHNlY3JldF9rZXkgPSBcImlkRzNNNkxqbGdZRzM4MjJsQ2ZlaGg3R3h2NkRtbFFjXCI7XG5cblxuXG4vLyBIdHRwQ2xpZW50LnNldFJlcXVlc3RPcHRpb25zKHsgdGltZW91dDogNTAwMCB9KTtcbi8vIEh0dHBDbGllbnQuc2V0UmVxdWVzdEludGVyY2VwdG9yKChyZXF1ZXN0T3B0aW9ucykgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKHJlcXVlc3RPcHRpb25zKTtcbi8vICAgICByZXF1ZXN0T3B0aW9ucy50aW1lb3V0ID0gNTAwMDtcbi8vICAgICByZXR1cm4gcmVxdWVzdE9wdGlvbnM7XG4vLyB9KTtcblxuY29uc3QgYWlwQ2xpZW50ID0gbmV3IG9jcihhcHBfaWQsIGFwaV9rZXksIHNlY3JldF9rZXkpO1xuXG5pbnRlcmZhY2UgTGljZW5zZVBsYXRlUmVzdWx0IHtcbiAgICBsb2dfaWQ6IG51bWJlcjtcbiAgICBlcnJvcl9jb2RlPzogbnVtYmVyO1xuICAgIGVycm9yX21zZz86IHN0cmluZztcbiAgICB3b3Jkc19yZXN1bHQ/OiB7XG4gICAgICAgIGNvbG9yOiBzdHJpbmc7XG4gICAgICAgIG51bWJlcjogc3RyaW5nO1xuICAgICAgICBwcm9iYWJpbGl0eTogbnVtYmVyW10sXG4gICAgICAgIHZlcnRleGVzX2xvY2F0aW9uOiBhbnlbXTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FuUGxhdGUoaW1hZ2VEYXRhOiBzdHJpbmcsIG11bHRpcGxlOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPExpY2Vuc2VQbGF0ZVJlc3VsdD4ge1xuICAgIHJldHVybiBhaXBDbGllbnQubGljZW5zZVBsYXRlKHtcbiAgICAgICAgaW1hZ2U6IGltYWdlRGF0YSxcbiAgICAgICAgbXVsdGlfZGV0ZWN0OiBtdWx0aXBsZS50b1N0cmluZygpXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYW5QbGF0ZUZyb21GaWxlKHBhdGgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBmcy5yZWFkRmlsZShwYXRoLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWlwQ2xpZW50LmxpY2Vuc2VQbGF0ZShkYXRhLnRvU3RyaW5nKCdiYXNlNjQnKSlcbiAgICAgICAgICAgICAgICAudGhlbihyZXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJldCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXggPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KVxufSJdfQ==